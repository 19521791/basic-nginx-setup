server {
        listen 80;
        server_name {{ portfolio_domain }};
        
        return 301 https://$host$request_uri;
}

 server {
        listen 443 ssl;
        server_name {{ portfolio_domain }};

        root {{ nginx_root }};
        index index.html;

        ssl_certificate {{ cert_path }}/{{ portfolio_domain }}/fullchain.pem;
        ssl_certificate_key {{ cert_path }}/{{ portfolio_domain }}/privkey.pem;

        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers HIGH:!aNULL:!MD5;

        access_log   /var/log/nginx/nginx.vhost.access.log;
        error_log    /var/log/nginx/nginx.vhost.error.log;

        location / {
                try_files $uri $uri/ /index.html;
        }

        keepalive_timeout 30;
        
        client_max_body_size 10M;

        large_client_header_buffers 4 8k;

        location ~ /\. {
          deny all;
        }

        error_page 404 /index.html;
}

